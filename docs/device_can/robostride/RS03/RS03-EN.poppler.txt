RS03-EN​

RS03-EN​
RS03 instruction manual
Precautions​

1. Please use according to the working parameters specified in this article, otherwise it may
cause serious damage to the product!​
2. Do not switch the control mode when the joint is running. If you need to switch, send the
command to stop the operation before switching.​
3. Check whether the parts are in good condition before use. If the parts are missing or
damaged, contact technical support in time.​
4. Do not disassemble the motor at will, so as to avoid unrecoverable failure.​
5. Ensure that there is no short circuit when the motor is connected, and the interface is
correctly connected as required.​

Legal Statement​

Before using this product, please read this manual carefully and operate the product according
to the contents of this manual. If the user violates the contents of this manual to use this
product, resulting in any property damage, personal injury accident, the company does not
assume any responsibility. Because this product is composed of many parts, do not allow
children to touch this product to avoid accidents. In order to prolong the service life of the
product, do not use this product in high temperature and high pressure environment. This
manual has been printed to the extent possible to include a description of the functions and
instructions for use. However, due to the continuous improvement of product functions, design
changes, etc., there may still be discrepancies with the products purchased by users.​
The color and appearance of this manual may differ from the actual product. Please refer to the
actual product. This manual is published by Beijing Lingfoot Times Technology Co., LTD.
(hereinafter referred to as Lingfoot), and Lingfoot may at any time make necessary
improvements and changes to the inaccurate and up-to-date information in this manual, or
make improvements to procedures and/or equipment. Such changes will be uploaded to the

company's official website in electronic format. Details can be found in the download center
(www.robstride.com). All images are for reference only. Please refer to actual objects.​

After-sales Policy​

The after-sales service of this product is implemented in strict accordance with the Law of the
People's Republic of China on the Protection of Consumer Rights and Interests and the Product
Quality Law of the People's Republic of China. The service content is as follows:​
1. Warranty period and contents
a. Users who place orders on the online channel to purchase this product can enjoy the
return service without reason within seven days from the day after signing. When
returning goods, the user must present a valid proof of purchase and return the invoice.
The user must ensure that the returned goods maintain the original quality and function,
the appearance is intact, the trademarks and various logos of the goods themselves and
accessories are complete, and if there are gifts, they should be returned together. If the
goods are artificially damaged, artificially disassembled, missing packaging boxes,
missing parts and accessories, they will not be returned. The logistics cost incurred during
the return shall be borne by the user (see "After-sales Service Fee Standard"). If the user
does not settle the logistics cost, it will be deducted from the refund amount according to
the actual amount incurred. Refund the amount paid to the user within seven days from
the date of receipt of the returned item. Refund method is the same as payment method.
The specific arrival date may be affected by factors such as banks and payment
institutions.​
b. The warranty period of this product is 1 year.​
c. Within 7 days after the user signs for the next day, non-human damage performance
failure occurs, through the Lingzhu after-sales service center test and confirmation, for
the user to handle the return business, the user must present a valid purchase voucher,
and return the invoice. Any freebies should be returned.
d. From 7 days to 15 days after the user signs for the next day, non-human damage
performance failure occurs, through the Lingfoot after-sales service center test and
confirmation, for the user to replace the whole set of goods. After the replacement, the
three guarantee period of the goods themselves is recalculated.​
e. From 15 days to 365 days after the user signed the next day, after the inspection and
confirmation of the Lingfoot after-sales service center, it is a quality fault of the product
itself, and can provide free maintenance services. The replacement of the faulty product
is owned by Lingzu Company. The product is not faulty and will be returned as is. This
product has been strictly tested after the factory, if there is a quality fault other than the
product itself, we will have the right to refuse the user's return demand.​

2. Non-warranty regulations The following circumstances are not covered by the warranty:​
3. Exceed the warranty period specified in the warranty terms.​
4. Failure to follow the instructions, resulting in product damage caused by wrong use.​
5. Damage caused by improper operation, maintenance, installation, modification, testing and
other improper use.​
6. Non-quality failure caused by conventional mechanical loss, wear.​
7. Damage caused by abnormal working conditions, including but not limited to falling, impact,
liquid immersion, violent impact, etc.​
8. Damage caused by natural disasters (such as floods, fires, lightning strikes, earthquakes, etc.)
or incapacitated forces.​
9. Damage caused by exceeding peak torque.​
10. Damage caused by exceeding peak torque.​
11. Failure or damage caused by other non-product design, technology, manufacturing, quality
and other problems.​
12. Use this product for commercial purposes.​
In the case of the above situation, the user must pay the cost.​

Motor specification​

Outline and mounting dimensions​

When fixing, the screw depth should not exceed the depth of the casing thread​

Standard service condition​
1. Rated voltage: 48 VDC​

2. Operating voltage range: 24V-60 VDC​
3. Rated load (CW) : 20 N.m​
4. Operation direction: CW/CCW from the direction of the exit shaft​
5. Use posture: the direction of the exit axis is horizontal or vertical​
6. Standard operating temperature: 25±5℃​
7. Operating temperature range: -20 ~ 50℃​
8. Standard operating humidity: 65%​
9. Humidity range: 5 ~ 85%, no condensation​
10. Storage temperature range: -30 ~ 70℃​
11. Insulation Class: Class B​

Electrical characteristics​

1. No load speed: 200 rpm±10%​
2. No load current: 2 Arms​
3. Rated load: 20 N.m​
4. Rated load speed: 180rpm±10%​
5. Rated load phase current (peak) : 13Apk±10%​
6. Peak load: 60 N.m​
7. Maximum load phase current (peak) : 43Apk±10%​
8. Insulation resistance/stator winding: DC 500VAC, 100M Ohms​
9. High voltage/stator and housing: 600 VAC, 1s, 2mA​
10. Motor back potential: 17Vrms/krpm±10%​
11. Torque constant: 2.36N.m/Arms​
12. T-N curve​

13. Maximum overload curve​
Test conditions: Ambient temperature: 25℃​
Winding limit temperature: 130℃ (this is the constraint temperature, the actual is 180 degrees)​
Speed: 24rpm​

Test data​

Mechanical characteristic
1. Weight: 880g±20g​
2. Number of poles: 42​
3. Phase number: 3 phases​
4. Drive mode: FOC​
5. Deceleration ratio: 9:1​

Driver Product Information​
Driver product Specifications​

Driver interface definition​

Driver interface definition​

Driver interface recommended brand and model​

Driver function pin and device description​
1. Power supply and CAN communication​

1. Download port​

1. Indicator light​

Driver function pin and device description​
1. Power supply and CAN communication​

1. Download port​

1. Indicator light​

Main devices and specifications​

Upper computer instructions​

Please go to www.robstride.com website download center​

Hardware disposition​

The articulated motor uses the CAN communication mode and has two communication cables.
It is connected to the debugger through the can to USB tool. The debugger needs to be installed
with the ch340 driver in advance and works in AT mode by default.​
It should be noted that we are based on the specific can to USB tool development of the
debugger, so we need to use our recommended serial port tool to debug the debugger, if you

want to transplant to other debugger platform can refer to the third chapter of the instructions
for development.​
The CAN to USB tool is recommended to use the official USB-CAN module of Lingzu Times. The
frame header of the corresponding serial port protocol is 41 54, and the frame tail is 0D 0A.​
When using the CAN-to-USB module, pay attention to the settings of the DIP switches on the
module: When DIP switch 1 is in the ON position, the module enters Boot mode and cannot
establish a connection with the host computer. When DIP switch 2 is in the ON position, a 120Ω
terminal resistor is connected to the module port, allowing normal communication with the
host computer.​

Upper computer interface and description​

It mainly includes:​
A. Select a module​
• Device module​
• disposition module​
• Analysis module​
• Help Module​
B. Select a submodule​
• Connect or disconnect motor equipment​
• Motor equipment information​

• Motor encoder calibration​
• Modify the motor CAN ID​

• Set the mechanical zero position of the motor​
• Motor program upgrade​

Parameter table, you can view and modify the motor parameters​
• Upload parameters. The parameters in the motor can be uploaded to the parameter table​
• Download parameters, you can download the data in the parameter table to the motor​
• Export parameters. You can download data in the parameter table to a local computer​
• Restore the data in the parameter table to factory defaults​
• Clear warning, can clear motor errors, such as high temperature​
Analysis modules include:​
• Oscilloscope, you can view the curve of parameter change with time​
• Frequency: You can adjust the frequency of viewing data​
• The channel can be disposition to view the data​
• Start and stop drawing​
• Output waveform data locally​
Help modules include:​
• Instructions, you can open the instruction manual​
• Yes, you can check the software information​
C. Motor information query​
• Device information​
• Parameter table information​
D. Data field
• Log information​
• Communication information​
E. Run the debugging area​
• Select equipment​
• Convenient operation area, can quickly control the positive and negative rotation of the
motor​
• Motion control area, which can control the motor operation according to various modes​
F. Submodule display area​

Motor setup​

Motor connection setup​

Connect the CAN-to-USB tool (Install the ch340 driver, which works in AT mode by default), click
the connection submodule in the device module, select the corresponding serial port
connection and motor type, and click Connect.​

Basic setup​

1. Change the motor id.​
2. Motor magnetic coding calibration, motor board and motor re-installation, or motor threephase line re-sequential connection, need to be re-calibrated magnetic coding.​
3. Set the zero position to 0.​
4. Motor program upgrade, when the motor program is updated, click the upgrade button to
select the upgrade file to upgrade.​

Parameter list​

After the motor is successfully connected, click the parameter table module in disposition
module. The log will show that all parameters are loaded successfully, indicating that the
relevant parameters of the motor are successfully read (Note: The parameter table is required
for disposition under the standby state of the motor. If the motor is in the running state, the
parameter table cannot be refreshed), the interface will display the relevant parameters of the
motor. The parameters in blue are the stored parameters in the motor, which can be modified in
the current value bar after the corresponding parameters. Click to download parameters to
download the parameters in the debugger to the motor, click to upload parameters to upload
the parameters in the motor to the debugger, and the green parameters of the motor are
observed parameters, which are collected parameters and can be observed in real time.​
Note: Please do not change the torque limit, protection temperature and overtemperature
time of the motor. Our company will not bear any legal responsibility for any damage to
human body or irreversible damage to joints caused by illegal operation of this product.​

Oscilloscope​

The interface supports viewing and observing the graph generated by real-time data, including
motor Id/Iq current, temperature, real-time speed at the output end, rotor (encoder) position,
output end position, etc.​

Click on the oscilloscope module in the analysis module, select the appropriate parameters in
the channel (parameter meaning can be referred to the parameter table), set the output
frequency, click on the start plot to observe the data graph, stop the plot to stop the observation
graph.​
Communication box instruction example:​
41 54 90 07 e8 0c 08 05 70 00 00 01 00 00 00 0d 0a​
The meaning is as follows​

The translation of extended frame canid into real canid requires the following transformations:​
90 07 e8 0c converts to binary as 1001 0000 0000 0111 1110 1000 0000 1100, remove the 100 on
the right and it becomes 1 0010 0000 0000 1111 1101 0000 0001, convert it to hexadecimal, It is
12 00 FD 01. According to the communication protocol, the meaning is as follows:​

can communication failure protection​

When the value of CAN_TIMEOUT is 0, this function is disabled​
When the CAN_TIMEOUT value is non-0, when the motor does not receive the can command
within a certain period of time, the motor enters the reset mode, and 20000 is 1s​

Motor fault instructions​

Function code 0x3022 indicates the fault code, where​
bit14:i square t overload fault: motor blocking overload algorithm protection​
bit7: Encoder uncalibrated: Motor uncalibrated encoder​
bit3: Overvoltage fault: the motor voltage exceeds the protection voltage by 60V​
bit2: Undervoltage fault: the motor voltage is lower than the protection voltage of 12V​
bit1: Driver chip failure: Motor driver chip failure reported​
bit0: Motor overtemperature fault: motor thermistor temperature exceeds 145 degrees​
Function code 0x3024 is driver chip fault code 1. The specific faults are as follows​

Function code 0x3025 is driver chip fault code 2. The specific faults are as followsFunction code​

Control demo​

jog running​
Set the maximum speed, click Run, click JOG run to make the motor run forward and backward​

Control mode switching​
The motor control mode can be changed in the motion mode interface​

Operation control mode​

Click the switch button on the right, then set five parameter values, click Start or continuous
send, the motor will return the feedback frame and run according to the target instruction; Click
the switch button on the right side again, and the motor will stop.​

Current mode​

Manually switch the current mode, click the switch button on the right side, then set the Iq
current command value, start or continue to send, the motor will follow the current command,
click the switch button on the right side again, the motor will stop.​
Click the switch button on the right side of the control mode, enter the amplitude and frequency
of the sinusoidal automatic test, then click the switch button on the right side of the sinusoidal
automatic test, and the iq (A) of the motor will run according to the amplitude and frequency of
the Settings.​

Velocity mode​

Manually cut the Velocity mode, click the right switch button, then set the speed command
value, start or continue to send, the motor will follow the speed command, click the right switch
button again, the motor will stop.​
Click the switch button on the right side of the control mode, enter the amplitude and frequency
of the sinusoidal automatic test, then click the switch button on the right side of the sinusoidal
automatic test, and the motor speed (rad/s) will run according to the amplitude and frequency
of the Settings.​

Location Mode (CSP)​

Manually switch the position mode (CSP), click the right switch button, then set the position
instruction value (rad), start or continuous transmission, the motor will follow the target

position instruction, click the right switch button again, the motor will stop. You can set the
speed to change the maximum speed for following the position.​
Click the switch button on the right side of the control mode, enter the amplitude and frequency
of the sinusoidal automatic test, then click the switch button on the right side of the sinusoidal
automatic test, and the motor position (rad) will run according to the amplitude and frequency
of the Settings.​

Location Mode (PP)​

Manually switch the position mode (PP), click the switch button on the right side, and then set
the position instruction value (rad), speed setting instruction value (rad/s), acceleration setting
(rad/s^2) to start or continue to send, the motor will follow the target position instruction to run,
click the switch button on the right side again, the motor will stop. You can modify the maximum
speed and acceleration followed by the position by setting the speed.​

Firmware update​

First, click Upgrade of device module and select bin file to burn; The second step is to confirm
the upgrade, and the motor starts to update the firmware. After the progress is completed, the
motor is updated and automatically restarts.​

Driver protocol and instructions​

The motor communication is the CAN 2.0 communication interface, the baud rate is 1Mbps, and
the extended frame format is adopted as follows:​

The control modes supported by the motor include:​
• Operation control mode: set 5 parameters of motor operation control;​
• Current mode: the specified Iq current of the given motor;​
• Velocity mode: the specified running speed of the given motor;​
• Position mode: Given the specified position of the motor, the motor will run to the specified
position;​

Description of the communication protocol type​
Communication type 0: Get device ID​

Gets the device's ID and 64-bit MCU unique identifier​

Reply frame:​

Communication Type 1: operation control mode motor control
instruction​

Response frame: Response motor feedback frame (see communication type 2)​
Communication Type 2: motor feedback data​

Communication Type 3: Motor enabled to run​

Response frame: Response motor feedback frame (see communication type 2)​

Communication Type 4: Motor stops running​

Response frame: Response motor feedback frame (see communication type 2)​

Communication type 6: Set motor mechanical zero​

Response frame: Response motor feedback frame (see communication type 2)​
Communication type 7: Set motor CAN_ID​
Change the current motor CAN_ID, effective immediately.​

Answer frame: Answer motor broadcast frame (see communication type 0)​

Communication type 17: Single parameter read​

Reply frame:​

Communication type 18: Single parameter write (lost in power failure)​

With type 22, the parameter starting with function code 0x20 of the parameter table in the upper
computer module can be saved​

Response frame: Response motor feedback frame (see communication type 2)​

Communication type 21: Fault feedback frame​

Communication type 22: Motor data save frame​

Response frame: Response motor feedback frame (see communication type 2)​

Communication type 23: Motor baud rate modification frame (re-poweron effect)​

Response frame: Response motor feedback frame (see communication type 0)​

Communication type 24: The motor actively reports frames​

Response frame:​

Communication type 25: Motor protocol modification frame (re-poweron effect)​

Response frame: Response motor feedback frame (see communication type 0)​

Read and write a single parameter list​

Read example:​

Take reading loc_kp as an example:​
Read instruction is​

The feedback instruction is​

Motor Function Description​

(If the following features are unavailable, please upgrade to the latest version via the official Git
repository.)​

1. Active Reporting​

• Disabled by default. Enable via Type 24.​

• Report type: Type 2 (default interval: 10ms). Adjust interval by modifying EPScan_time

via Type 18.​

2. Zero-Point Flag ( zero_sta )​
• Modify via: ​

◦ Host computer​

◦ Type 18 (requires saving via Type 22 for communication)​

• Default flag: 0 → Power-on position range: 0–2π.​
• If set to 1 : Power-on position range: π–π.​

3. Type 2 Update​

• Updated to periodic looping within -4π–4π (enables cycle counting).​
• Note: Position interface parameters must be adjusted: ​

: 12.57f​
◦ P_MAX : 12.57f​
◦

P_MIN

4. Protocol Switching (Requires CAN adapter)​
• Methods: ​

◦ Modify protocol_1 via host computer.​
◦ Send Type 25 command.​

• Reboot required after switching.​
• Post-switch CAN commands: ​

◦ CANopen: Send extended frame (protocol switch frame).​
◦ MIT Protocol: Send standard frame (Command 8).​

5. Post-Power-Off Anti-Backdrive Protection​

• Default: Motor imposes damping if rotated rapidly while powered off (prevents surge).​
• Disable: Set damper = 1 .​

6. Zero Calibration Rules​

• Supported modes: CSP and Motion Control.​
• PP Mode: Zero calibration is blocked.​
• Old vs. New Versions: ​

◦ Old: Zero calibration causes large deviation → motor immediately moves to target.​

◦ New (CSP/Motion Control): Target updates to 0 instantly → motor remains stationary.​

7. Position Offset ( add_offset )​

• Example: If offset = 1 , the current zero shifts to (current position + 1 rad).​

• Use case: Bypass mechanical limits (e.g., set zero at 1 rad → power-on treats 1 rad as

new zero).​

8. CANopen ID​

• Old version: Fixed to 1 .​

• New version: Matches the private protocol CAN ID.​

Notes for Implementation​

• Always save settings (e.g., Type 22 for zero_sta ).​

• Verify CAN adapter compatibility for protocol switching.​

• For zero offsets, ensure mechanical safety limits are respected.​

Control mode instructions​
Program sample​

Examples of various mode control motors are provided below (take gd32f303 as an example)​
The following are library, function, and macro definitions for the various instances​
代码块​
1

#define P_MIN -12.57f

2
3

#define P_MAX 12.57f

4
5

#define V_MIN -20.0f

6
7

#define V_MAX 20.0f

8
9

#define KP_MIN 0.0f

10
11

#define KP_MAX 5000.0f

12
13

#define KD_MIN 0.0f

14
15

#define KD_MAX 100.0f

16
17

#define T_MIN -60.0f

18
19

#define T_MAX 60.0f

20
21

struct exCanIdInfo{

22
23

uint32_t id:8;

24
25

uint32_t data:16;

26
27

uint32_t mode:5;

28
29
30

uint32_t res:3;

31

};

32
33

can_receive_message_struct rxMsg;

34
35

can_trasnmit_message_struct txMsg={

36
37

.tx_sfid = 0,

38
39

.tx_efid = 0xff,

40
41

.tx_ft = CAN_FT_DATA,

42
43

.tx_ff = CAN_FF_EXTENDED,

44
45

.tx_dlen = 8,

46
47

};

48
49

#define txCanIdEx (*((struct exCanIdInfo*)&(txMsg.tx_efid)))

50
51
52
53

定义数据结构

int float_to_uint(float x, float x_min, float x_max, int bits){

54
55

float span = x_max - x_min;

56
57

float offset = x_min;

58
59

if(x > x_max) x=x_max;

60
61

else if(x < x_min) x= x_min;

62
63

return (int) ((x-offset)*((float)((1<<bits)-1))/span);

64
65

}

66
67

#define can_txd() can_message_transmit(CAN0, &txMsg)

68
69

将扩展帧id解析为自

#define rxCanIdEx (*((struct exCanIdInfo*)&(rxMsg.rx_efid))) //

#define can_rxd() can_message_receive(CAN0, CAN_FIFO1, &rxMsg)

The following lists the common types of communication sent:​

Motor Enabled Run frame (communication type 3)​

1

void motor_enable(uint8_t id, uint16_t master_id)

2

{

3

txCanIdEx.mode = 3;

4

txCanIdEx.id = id;

5

txCanIdEx.res = 0;

6

txCanIdEx.data = master_id;

7

txMsg.tx_dlen = 8;

8

txCanIdEx.data = 0;

9

can_txd();

10

}

Operation control mode Motor control instruction (communication type
1)​
代码块​
1

void motor_controlmode(uint8_t id, float torque, float MechPosition, float
speed, float kp, float kd)

2
3

{

4
5

txCanIdEx.mode = 1;

6
7

txCanIdEx.id = id;

8
9

txCanIdEx.res = 0;

10
11

txCanIdEx.data = float_to_uint(torque,T_MIN,T_MAX,16);

12
13

txMsg.tx_dlen = 8;

14
15

txMsg.tx_data[0]=float_to_uint(MechPosition,P_MIN,P_MAX,16)>>8;

16
17

txMsg.tx_data[1]=float_to_uint(MechPosition,P_MIN,P_MAX,16);

18
19

txMsg.tx_data[2]=float_to_uint(speed,V_MIN,V_MAX,16)>>8;

20
21

txMsg.tx_data[3]=float_to_uint(speed,V_MIN,V_MAX,16);

22
23

txMsg.tx_data[4]=float_to_uint(kp,KP_MIN,KP_MAX,16)>>8;

24
25

txMsg.tx_data[5]=float_to_uint(kp,KP_MIN,KP_MAX,16);

26
27

txMsg.tx_data[6]=float_to_uint(kd,KD_MIN,KD_MAX,16)>>8;

28
29

txMsg.tx_data[7]=float_to_uint(kd,KD_MIN,KD_MAX,16);

30
31

can_txd();

32
33

}

Motor mode parameter write command (communication type 18,
running mode switch)​
代码块​
1

void motor_reset(uint8_t id, uint16_t master_id)

2
3

{

4
5

txCanIdEx.mode = 4;

6
7

txCanIdEx.id = id;

8
9

txCanIdEx.res = 0;

10
11

txCanIdEx.data = master_id;

12
13

txMsg.tx_dlen = 8;

14
15

for(uint8_t i=0;i<8;i++)

16
17

{

18
19

txMsg.tx_data[i]=0;

20
21

}

22
23

can_txd();

24
25

}

Motor mode parameter write command (communication type 18,
running mode switch)​
代码块​
1

uint8_t runmode;

2
3
4

uint16_t index;

5

void motor_modechange(uint8_t id, uint16_t master_id)

6
7

{

8
9

txCanIdEx.mode = 0x12;

10
11

txCanIdEx.id = id;

12
13

txCanIdEx.res = 0;

14
15

txCanIdEx.data = master_id;

16
17

txMsg.tx_dlen = 8;

18
19

for(uint8_t i=0;i<8;i++)

20
21

{

22
23

txMsg.tx_data[i]=0;

24
25

}

26
27

memcpy(&txMsg.tx_data[0],&index,2);

28
29

memcpy(&txMsg.tx_data[4],&runmode, 1);

30
31

can_txd();

32
33

}

Motor mode parameter write command (communication type 18, control
parameter write)​
代码块​
1

uint16_t index;

2
3

float ref;

4
5

void motor_write(uint8_t id, uint16_t master_id)

6
7

{

8
9

txCanIdEx.mode = 0x12;

10
11

txCanIdEx.id = id;

12
13

txCanIdEx.res = 0;

14
15

txCanIdEx.data = master_id;

16
17

txMsg.tx_dlen = 8;

18
19

for(uint8_t i=0;i<8;i++)

20
21

{

22
23

txMsg.tx_data[i]=0;

24
25

}

26
27

memcpy(&txMsg.tx_data[0],&index,2);

28
29

memcpy(&txMsg.tx_data[4],&ref,4);

30
31

can_txd();

32
33

}

Operation control mode​

The motor is in operation control mode by default after power-on.​
Send motor Enable Run frame (communication type 3) --> Send operation mode motor control
command (communication type 1) --> Receive motor feedback frame (communication type 2)​
Operation control mode description: The control logic of the operation and control mode is
t_ref=Kd * (v_vset-v_actual)+Kp * (p_set-p_actual)+t_ff. Tref is converted to the expected iq

current through an internal formula and output through the current loop Simple control
demonstration: Set t_ff to 0, v_vset to 1, Kd to 1, p_set to 0, Kp to 0. If there is no external load on
the motor, it will run at a speed of 1rad/s. If there is an external load, kd needs to be increased to
resist the external load Set t_ff to 0, v_vset to 0, Kd to 1, p_set to 0, Kp to 0, the motor is in
damping mode. When the motor is externally rotated, a damping is applied, which increases
with the increase of kd. It should be noted that the motor generates electricity under this
condition and requires power supply to prevent overvoltage Set t_ff to 0, v_vset to 0, Kd to 1,
p_set to 5, Kp to 1. If there is no external load on the motor, it will run to the target position of 5.
Increasing kp will increase the force required to maintain the target position, and kd is damping.
Without kd, the motor will sway to the target position​

Current mode​

Send motor mode parameter write command (communication type 18) Set the runmode
parameter to 3 --> Send motor Enable run frame (communication type 3) --> Send motor mode
parameter write command (communication type 18) set the iq_ref parameter to the default
current instruction​

Velocity mode​

Send motor mode parameter write command (communication type 18) Set the runmode
parameter to 2 --> Send motor Enable run frame (communication type 3) --> Send motor mode
parameter write command (communication type 18) set limit_cur parameter as default
maximum current instruction --> Send motor mode parameter write command (communication
type 18) Set acc_rad parameter as default acceleration instruction --> Send motor mode
parameter write command (communication type 18) Set spd_ref parameter as default speed
instruction​

Location Mode (CSP)​

Send motor mode parameter write command (communication type 18) Set the runmode
parameter to 5 --> Send motor Enable run frame (communication type 3) --> Send motor mode
parameter write command (communication type 18) set limit_spd parameter as default
maximum speed instruction --> Send motor mode parameter write command (communication
type 18) Sets loc_ref parameter as default position instruction​

Location Mode (PP)​

Send motor mode parameter write command (communication type 18) Set the runmode
parameter to 1 --> Send motor Enable run frame (communication type 3) --> Send motor mode
parameter write command (communication type 18) set The vel_max parameter is the default
maximum speed instruction --> Send motor mode parameter write command (communication
type 18) Set the acc_set parameter to the default acceleration instruction --> Send motor mode
parameter write command (communication type 18) Set the loc_ref parameter to the default
position instruction​
Note: This mode does not support changing the speed and acceleration during operation. If
you want to make an emergency stop, you can change vel_max to 0 during the process, and
it will stop at the current speed and acceleration plan​

Stop running​

Sending motor stop frame (communication type 4)​

Explanation of Canopen Communication Protocol Types​
State Machine Description​

Motor Enable:​
When initially powered on, the motor defaults to the SWITCH_ON_DISABLED state. To
transition to OPERATION_ENABLE, modify the Controlword (6040H) to 6, 7, or 15 (step-by-

step transition), or directly set it to 15 for immediate enablement.​
Stopping the Motor:​
If the motor is in OPERATION_ENABLE state and needs to stop normally, modify the
Controlword (6040H) to 1. The motor will return to the disabled state
(SWITCH_ON_DISABLED).​
Emergency Stop (Use with Caution—Risk of Voltage Surge):​
During operation, an emergency stop can be triggered by setting the Controlword (6040H) to
11.​
Fault Clearance:​
If the motor enters a FAULT state due to protection mechanisms, modifying the Controlword
(6040H) can clear standard errors.​
Important Note:​
Mode changes for this motor must be performed in the disabled state
(SWITCH_ON_DISABLED). Ensure the desired mode is configured before enabling
OPERATION_ENABLE to avoid unexpected behavior.​

Status Feedback Parameters​

Homing Mode (Zero Position Setting)​

Homing method:​
• Set Modes of operation to 6 while the motor is in the disabled state
(SWITCH_ON_DISABLED). The motor will then define the current position as the zero point.​
• To hold the zero position, modify the Controlword to 15, and the motor will maintain its
position at the home location.​

Position Mode (PP - Profile Position)​

Steps to Configure Position Mode (PP):​
1. While the motor is in the disabled state (SWITCH_ON_DISABLED), set Modes of operation
to 1. ​
◦ Mandatory parameters: ​
▪ Target_torque (absolute max torque in position mode)​
▪ Profile_velocity (absolute speed in position mode)​
▪ Profile_acceleration (absolute acceleration in position mode)​
◦ Optional parameters: ​
▪ Position_window (if not set, window check is disabled)​
▪ Position_window_time (if not set, window check is disabled)​

2. Set Controlword (6040) to 15 to enable operation.​
3. Set Target_position (absolute position) to move the motor to the desired position.​

Position Mode (CSP - Cyclic Synchronous Position)​

Steps to Configure Position Mode (CSP):​
1. While the motor is in the disabled state (SWITCH_ON_DISABLED), set Modes of operation
to 5. ​
◦ Mandatory parameters: ​
▪ Target_torque (absolute max torque in position mode)​
▪ Profile_velocity (absolute speed in position mode)​
◦ Optional parameters: ​
▪ Position_window (0 = disabled)​
▪ Position_window_time (0 = disabled)​
2. Set Controlword (6040) to 15 to enable operation.​
3. Set Target_position (absolute position) to move the motor to the desired position.​

Velocity Mode​

Steps to Configure Velocity Mode:​
1. While the motor is in the disabled state (SWITCH_ON_DISABLED), set Modes of operation
to 3. ​
◦ Mandatory parameter: ​
▪ Target_torque (absolute max torque in velocity mode)​
2. Set Controlword (6040) to 15 to enable operation.​
3. Set Target_velocity to reach the desired speed.​

Torque Mode​

Steps to Configure Torque Mode:​
1. While the motor is in the disabled state (SWITCH_ON_DISABLED), set Modes of operation
to 4.​
2. Set Controlword (6040) to 15 to enable operation.​
3. Set Target_torque to output the desired torque.​

Protocol Switching (Extended Frame): Switch Motor Protocol (Takes
Effect After Power Cycle)​

• F_CMD (Byte 6) defines the motor protocol: ​
◦ 0: Private protocol (default)​
◦ 1: CANopen protocol​
◦ 2: MIT protocol​

Response Frame:​

MIT Communication Protocol Description​

The motor communication adopts the CAN 2.0 interface with a default baud rate of 1 Mbps. The
baud rate can be modified by switching to the private protocol. The standard frame format is as
follows:​

Supported Control Modes:​

• MIT Mode: Provides five motion control parameters to the motor.​
• Velocity Mode: Specifies the target speed for the motor.​

• Position Mode: Specifies the target position and speed, allowing the motor to run to the

designated position at the configured speed.​

Response Command 1: Data Feedback (Motor Status)​

Response Command 2: MCU Identification​

Command 1: Enable Motor Operation​

Response: Response Command 1​

Command 2: Stop Motor Operation​

Response: Response Command 1​

Command 3: MIT Dynamic Parameters​

Response: Response Command 1​

Command 4: Set Zero Position (Non-Position Mode)​

Response: Response Command 1​

Command 5: Clear Errors & Read Fault Status​

Response (Fault Clear): Response Command 1​
Fault Status Response:​

Command 6: Set Operation Mode​

Response: Response Command 1​

Command 7: Modify Motor CAN ID​

Response: Response Command 2​

Command 8: Change Communication Protocol (Takes Effect After Power
Cycle)​

Response: Response Command 2​

Command 9: Modify Host CAN ID​

Response: Response Command 2​

Command 10: Position Mode Control Command​

Response: Response Command 1​

Command 11: Velocity Mode Control Command​

Response: Response Command 1​

Motion Control Mode​

The motor defaults to Motion Control Mode upon power-up.​
1. Send the Motor Enable Command (Command 1).​
2. Send the Motion Control Command (Command 3) to activate dynamic parameter control.​
3. Send the Motor Stop Command (Command 2) to halt operation when needed.​

Velocity Mode​

1. Configure the motor's operation mode by sending Set Operation Mode Command
(Command 6) with Mode = 2 (Velocity Mode).​
2. Send the Motor Enable Command (Command 1) to activate the motor.​
3. Send the Velocity Mode Control Command (Command 11) to set the maximum current
(absolute value) and target speed.​
4. To stop, send the Motor Stop Command (Command 2).​

Position Mode (CSP - Cyclic Synchronous Position)​

1. Configure the motor's operation mode by sending Set Operation Mode Command
(Command 6) with Mode = 1 (Position Mode).​
2. Send the Motor Enable Command (Command 1) to activate the motor.​
3. Send the Position Mode Control Command (Command 10) to set the maximum speed
(absolute value) and target position.​
4. To stop, send the Motor Stop Command (Command 2).​

